<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Run a report — orderly_run • orderly3</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Run a report — orderly_run"><meta property="og:description" content="Run a report.  This will create a new directory in
drafts/&amp;lt;reportname&amp;gt;, copy your declared resources there, run
your script and check that all expected artefacts were created."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">orderly3</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.99.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/mrc-ide/orderly3/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Run a report</h1>
    <small class="dont-index">Source: <a href="https://github.com/mrc-ide/orderly3/blob/HEAD/R/run.R" class="external-link"><code>R/run.R</code></a></small>
    <div class="hidden name"><code>orderly_run.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Run a report.  This will create a new directory in
<code>drafts/&lt;reportname&gt;</code>, copy your declared resources there, run
your script and check that all expected artefacts were created.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">orderly_run</span><span class="op">(</span></span>
<span>  <span class="va">name</span>,</span>
<span>  parameters <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  envir <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  logging_console <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  logging_threshold <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  search_options <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  root <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  locate <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>name</dt>
<dd><p>Name of the report to run</p></dd>


<dt>parameters</dt>
<dd><p>Parameters passed to the report. A named list of
parameters declared in the <code>orderly.yml</code>.  Each parameter
must be a scalar character, numeric, integer or logical.</p></dd>


<dt>envir</dt>
<dd><p>The environment that will be used to evaluate the
report script; by default we use the global environment, which
may not always be what is wanted.</p></dd>


<dt>logging_console</dt>
<dd><p>Optional logical, passed through to
outpack::outpack_packet_start to control printing logs to the
console, overriding any default configuration set at the root.</p></dd>


<dt>logging_threshold</dt>
<dd><p>Optional logging threshold, passed through to
outpack::outpack_packet_start to control the amount of detail
in logs printed during running, overriding any default
configuration set at the root. If given, must be one of <code>info</code>,
<code>debug</code> or <code>trace</code> (in increasing order of
verbosity). Practically this has no effect at present as we've
not added any fine-grained logging.</p></dd>


<dt>search_options</dt>
<dd><p>Optional control over locations, when used with
<a href="orderly_dependency.html">orderly_dependency</a>; see Details.</p></dd>


<dt>root</dt>
<dd><p>The path to an orderly root directory, or <code>NULL</code>
(the default) to search for one from the current working
directory if <code>locate</code> is <code>TRUE</code>.</p></dd>


<dt>locate</dt>
<dd><p>Logical, indicating if the configuration should be
searched for.  If <code>TRUE</code> and <code>config</code> is not given,
then orderly looks in the working directory and up through its
parents until it finds an <code>.outpack</code> directory</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>The id of the created report (a string)</p>
    </div>
    <div id="locations-used-in-dependency-resolution">
    <h2>Locations used in dependency resolution</h2>
    


<p>If your packet depends on other packets, you will want to control
the locations that are used to find appropriate packets. The
control for this is passed through this function and <em>not</em> as an
argument to <a href="orderly_dependency.html">orderly_dependency</a> because this is a
property of the way that a packet is created and not of a packet
itself; importantly different users may have different names for
their locations so it makes little sense to encode the location
name into the source code. Alternatively, you want to use
different locations in different contexts (initial development
where you want to include local copies packets as possible
dependencies vs resolving dependencies only as they would be
resolved on one of your locations!</p>
<p>Similarly, you might want to include packets that are known by
other locations but are not currently downloaded onto this
machine - pulling these packets in could take anything from
seconds to hours depending on their size and the speed of your
network connection (but <em>not</em> pulling in the packets could mean
that your packet fails to run).</p>
<p>To allow for control over this you can pass in an argument
<code>search_options</code>, which is a <a href="https://rdrr.io/pkg/outpack/man/outpack_search_options.html" class="external-link">outpack::outpack_search_options</a>
object, and allows control over the names of the locations to
use, whether metadata should be refreshed before we pull
anything and if packets that are not currently downloaded should
be considered candidates.</p>
<p>This has no effect when running interactively, in which case you
can specify the search options (root specific) with
<a href="orderly_interactive_set_search_options.html">orderly_interactive_set_search_options</a></p>
    </div>
    <div id="equivalence-to-the-old-use-draft-option">
    <h2>Equivalence to the old <code>use_draft</code> option</h2>
    


<p>The above location handling generalises orderly (v1)'s old
<code>use_draft</code> option, in terms of the <code>location</code> argument to
outpack::outpack_search_options`:</p><ul><li><p><code>use_draft = TRUE</code> is <code>location = "local"</code></p></li>
<li><p><code>use_draft = FALSE</code> is <code>location = c(...)</code> where you should provide
all locations <em>except</em> local
(<code>setdiff(outpack::outpack_location_list(), "local")</code>)</p></li>
<li><p><code>use_draft = "newer"</code> is <code>location = NULL</code></p></li>
</ul><p>(this last option was the one most people preferred so is the new
default behaviour). In addition, you could resolve dependencies
as they currently exist on production right now with the options:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>location <span class="ot">=</span> <span class="st">"production"</span>, pull_metadata <span class="ot">=</span> <span class="cn">TRUE</span>, require_unpacked <span class="ot">=</span> <span class="cn">FALSE</span></span></code></pre><p></p></div>
<p>which updates your current metadata from production, then runs
queries against only packets known on that remote, then depends
on them even if you don't (yet) have them locally.  This
functionality was never available in orderly version 1, though
we had intended to support it.</p>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rich FitzJohn, Robert Ashton, Alex Hill.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

